/**
 * expaste - v0.0.1
 * update: 2015-02-28
 * Author: YusukeHirao []
 * Github: https://github.com/YusukeHirao/expaste.git
 * License: Licensed under the MIT License
 */


(function(){"use strict";var a=function(b){return this instanceof a?void this.init(b):new a(b)};a.prototype.init=function(b){var c,d,e;b===String(b)?(c=b,d=b):(c=b.getData("text/plain"),d=b.getData("text/html"),e=b.files),this.origin=d?d:c;var f,g;f=a.parseHTMLFromString(d,"text/html"),f&&(g=f.getElementsByTagName("table")),g&&g[0]?this.rows=a.domToMap(g[0]):(this.rows=null,c&&(this.text=c))},a.parseHTMLFromString=function(a){var b=new DOMParser,c=b.parseFromString(a,"text/html");return c||(c=document.implementation.createHTMLDocument(""),c.body.innerHTML=a),c},a.prototype.toString=function(){return this.toCSV(" ")},a.prototype.toTable=function(){},a.prototype.toTableStringify=function(){},a.prototype.toJSON=function(){return this.rows?this.rows:{text:this.text}},a.prototype.toJSONStringify=function(a,b){return JSON.stringify(this.toJSON(),a,b)},a.prototype.toMarkdown=function(){var b,c,d,e,f="name",g=[],h=0;return this.rows?(b=this.rows.concat(),b.forEach(function(a){h=Math.max(h,a.length)}),c=new Array(h).join(",").split(",").map(function(){return{value:f}}),b.unshift(c),b.forEach(function(b){b.forEach(function(b,c){void 0===g[c]&&(g[c]=3),g[c]=Math.max(g[c],a.getWidth(b.value))})}),e=b.map(function(b){return b.map(function(b,c){var d=g[c]-a.getWidth(b.value)+1,e="";return d>0&&(e=new Array(d).join(" ")),b.value+e}).join("|")}),d=g.map(function(a){return new Array(a+1).join("-")}).join("|"),e.splice(1,0,d),e.join("\n")):this.text},a.prototype.toCSV=function(a){return a=a||",",this.rows?this.rows.map(function(b){return b.map(function(b){return-1!==b.value.indexOf(a)?'"'+b.value+'"':b.value}).join(a)}).join("\n"):this.text},a.prototype.toTSV=function(){return this.toCSV("	")},a.getWidth=function(a){var b=0;return a.split("").forEach(function(a){var c=a.charCodeAt(0);b+=687>=c?1:2}),b},a.domToMap=function(b){for(var c,d,e,f,g=[],h=b.getElementsByTagName("tr"),i=0,j=h.length;j>i;i++){for(c=[],d=h[i].querySelectorAll("th, td"),f=d.length,e=0;f>e;e++)c.push(new a.Cell(d[e]));g.push(c),c=null}return g},a.getDataByEvent=function(b){return b.clipboardData?new a(b.clipboardData):null},a.Cell=function(b){return this instanceof a.Cell?void this.init(b):new a.Cell(cellNodea)},a.Cell.prototype.init=function(a){a=a||{},this.value=a.textContent||"",this.rowSpan=a.rowSpan||0,this.colSpan=a.colSpan||0,this.isHeader="TH"===a.nodeName},a.Cell.prototype.toString=function(){return this.value},this.expaste=a}).call(this);
//# sourceMappingURL=expaste.min.js.map